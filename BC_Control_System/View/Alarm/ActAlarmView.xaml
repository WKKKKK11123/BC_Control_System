<UserControl
    x:Class="BC_Control_System.View.Alarm.ActAlarmView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:BC_Control_System.View.Alarm"
    xmlns:localConverter="clr-namespace:BC_Control_System.Converters"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="clr-namespace:BC_Control_Models;assembly=BC_Control_Models"
    xmlns:theme="clr-namespace:BC_Control_System.Theme"
    d:DesignHeight="655"
    d:DesignWidth="1348"
    mc:Ignorable="d">
    <UserControl.Resources>
        <localConverter:EnumDescriptionConverter x:Key="EnumToDiscriptionConverter" />

    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="7*" />
            <ColumnDefinition Width="176" />
        </Grid.ColumnDefinitions>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition Height="20*" />
            </Grid.RowDefinitions>
            <TextBlock Margin="10,10,1,10" Text="Actual Alarm" />
            <DataGrid
                x:Name="grid"
                Grid.Row="1"
                HorizontalAlignment="Left"
                AutoGenerateColumns="False"
                CanUserAddRows="False"
                CanUserDeleteRows="False"
                CanUserReorderColumns="False"
                CanUserResizeColumns="False"
                CanUserResizeRows="False"
                ColumnHeaderHeight="35"
                FontSize="16"
                GridLinesVisibility="All"
                HeadersVisibility="Column"
                HorizontalGridLinesBrush="LightGray"
                IsReadOnly="True"
                ItemsSource="{Binding AlarmLogs}"
                SelectionMode="Single"
                Style="{x:Null}"
                VerticalGridLinesBrush="LightGray"
                VerticalScrollBarVisibility="Visible">

                <DataGrid.Columns>
                    <!--<DataGridTextColumn
                        Width="150"
                        Binding="{Binding Date, StringFormat={}{0:yyyy年MM月dd日}}"
                        FontSize="16"
                        Header="Data" />-->
                    <DataGridTextColumn
                        Width="180"
                        Binding="{Binding InsertTime, Mode=TwoWay}"
                        FontSize="16"
                        Header="Time" />
                    <DataGridTextColumn
                        Width="150"
                        Binding="{Binding Controller, Converter={StaticResource EnumToDiscriptionConverter}, ConverterParameter={x:Type model:PlcEnum}, Mode=TwoWay}"
                        FontSize="16"
                        Header="Unit" />
                    <DataGridTextColumn
                        Width="500"
                        Binding="{Binding Comment, Mode=TwoWay}"
                        FontSize="16"
                        Header="Alarm Name" />
                    <DataGridTextColumn
                        Width="120"
                        Binding="{Binding VarName, Mode=TwoWay}"
                        FontSize="16"
                        Header="Code" />
                    <DataGridTextColumn
                        Width="120"
                        Binding="{Binding Priority, Mode=TwoWay}"
                        FontSize="16"
                        Header="Level" />
                    <DataGridTextColumn
                        Width="*"
                        Binding="{Binding GroupName, Mode=TwoWay}"
                        FontSize="16"
                        Header="Mode" />
                </DataGrid.Columns>
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Height" Value="35" />

                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.Resources>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="HorizontalContentAlignment" Value="Center" />
                    </Style>

                </DataGrid.Resources>
            </DataGrid>
        </Grid>
        <Border
            Grid.Column="2"
            Margin="6"
            BorderBrush="Gray"
            BorderThickness="1">
            <StackPanel Grid.Column="1" Orientation="Vertical">
                <Button
                    Width="140"
                    Margin="3,5,3,1"
                    Command="{Binding ResetAllCommand}"
                    Content="Reset All"
                    FontSize="12" />
                <Button
                    Width="140"
                    Margin="3,5,3,1"
                    VerticalAlignment="Center"
                    Background="White"
                    Command="{Binding ResetAlarmSingleCommand}"
                    CommandParameter="{Binding ElementName=grid, Path=SelectedItem}"
                    Content="Reset"
                    FontSize="12" />

            </StackPanel>
        </Border>
    </Grid>
</UserControl>
